<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CBUS Strategic Projection - 2026 Data</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f4f8; padding: 20px; color: #2c3e50; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 10px solid #004a99; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .input-box { margin-bottom: 15px; }
        label { display: block; font-size: 13px; font-weight: bold; margin-bottom: 5px; color: #555; }
        input, select { width: 100%; padding: 12px; border: 1px solid #cbd5e0; border-radius: 8px; font-size: 15px; box-sizing: border-box; }
        
        .header-area { text-align: center; margin-bottom: 25px; }
        .disclaimer { font-size: 12px; color: #666; font-style: italic; margin-bottom: 20px; text-align: center; line-height: 1.4; }

        /* Contribution Panel */
        .breakdown-panel { grid-column: span 2; background: #f8fafc; border: 1px solid #e2e8f0; padding: 20px; border-radius: 12px; margin-bottom: 20px; }
        .breakdown-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; text-align: center; }
        .stat { font-size: 22px; font-weight: bold; color: #004a99; display: block; }
        .stat-label { font-size: 12px; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; }

        /* Toggle & Frequency Styles */
        .toggle-container { display: flex; gap: 8px; align-items: center; margin-bottom: 5px; }
        .toggle-btn { padding: 4px 10px; font-size: 12px; cursor: pointer; border: 1px solid #004a99; background: white; color: #004a99; border-radius: 6px; font-weight: bold; }
        .toggle-btn.active { background: #004a99; color: white; }
        .freq-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 10px; }

        table { width: 100%; border-collapse: collapse; margin-top: 30px; font-size: 14px; }
        th { background: #004a99; color: white; padding: 12px; text-align: left; }
        td { padding: 10px; border-bottom: 1px solid #edf2f7; }
        .bg-blue { background: #ebf8ff; font-weight: bold; }
        .text-red { color: #e53e3e; font-weight: bold; }
        .run-btn { width: 100%; padding: 18px; background: #004a99; color: white; border: none; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <div class="header-area">
        <h1 style="margin-bottom: 5px; color: #004a99;">üèóÔ∏è CBUS Strategic Projection</h1>
        <div class="disclaimer">
            Investment performance to 31 December 2025.<br>
            Past performance is not a reliable indicator of future performance.
        </div>
    </div>

    <div class="grid">
        <div class="input-box">
            <label>Current Age</label>
            <input type="number" id="age" value="30" oninput="updateBreakdown()">
        </div>
        <div class="input-box">
            <label>Retirement Age</label>
            <input type="number" id="retAge" value="67">
        </div>

        <div class="input-box">
            <label>Salary & Frequency</label>
            <div class="freq-grid">
                <input type="number" id="salary" value="90000" oninput="updateBreakdown()">
                <select id="freq" onchange="updateBreakdown()">
                    <option value="1">Annually</option>
                    <option value="12">Monthly</option>
                    <option value="26">Fortnightly</option>
                    <option value="52">Weekly</option>
                </select>
            </div>
        </div>

        <div class="input-box">
            <label>Annual Wage Growth (%)</label>
            <input type="number" id="wageGrowth" value="3.0" step="0.1">
        </div>

        <div class="input-box">
            <label>Current Super Balance ($)</label>
            <input type="number" id="balance" value="50000">
        </div>

        <div class="input-box">
            <div class="toggle-container">
                <label id="sgLabel">Employer SG Rate (%)</label>
                <button class="toggle-btn active" id="btnSGPct" onclick="setSGMode('pct')">%</button>
                <button class="toggle-btn" id="btnSGDol" onclick="setSGMode('dol')">$</button>
            </div>
            <input type="number" id="sgInput" value="11.5" step="0.1" oninput="updateBreakdown()">
        </div>

        <div class="input-box">
            <div class="toggle-container">
                <label id="ssLabel">Salary Sacrifice (%)</label>
                <button class="toggle-btn active" id="btnSSPct" onclick="setSSMode('pct')">%</button>
                <button class="toggle-btn" id="btnSSDol" onclick="setSSMode('dol')">$</button>
            </div>
            <input type="number" id="ssInput" value="0" step="0.1" oninput="updateBreakdown()">
        </div>

        <div class="breakdown-panel">
            <div class="breakdown-grid">
                <div>
                    <span class="stat-label">Total Annual Concessional (under $30k Cap)</span>
                    <span class="stat" id="dispConc">$0</span>
                </div>
                <div>
                    <span class="stat-label">Annual Non-Concessional (Overflow)</span>
                    <span class="stat" id="dispNonConc">$0</span>
                </div>
            </div>
            <p id="capWarning" style="color:#e53e3e; font-size:11px; margin-top:10px; text-align:center; display:none; font-weight:bold;">
                ‚ö†Ô∏è ALERT: Combined contributions exceed the $30,000 cap. Excess is treated as Non-Concessional.
            </p>
        </div>

        <div class="input-box" style="grid-column: span 2;">
            <label>Investment Option (Sorted by Performance Record)</label>
            <select id="strategy">
                <optgroup label="10 Year Record">
                    <option value="0.0800">Growth (MySuper) - 8.00%</option>
                    <option value="0.0965">High Growth - 9.65%</option>
                    <option value="0.0443">Conservative - 4.43%</option>
                </optgroup>
                <optgroup label="5 Year Record">
                    <option value="0.0531">Conservative Growth - 5.31%</option>
                </optgroup>
                <optgroup label="3 Year Record">
                    <option value="0.1103">Growth Plus - 11.03%</option>
                    <option value="0.1198">Indexed Diversified - 11.98%</option>
                    <option value="0.1898">Overseas Shares - 18.98%</option>
                    <option value="0.1089">Australian Shares - 10.89%</option>
                    <option value="0.0323">Cash - 3.23%</option>
                </optgroup>
            </select>
        </div>
    </div>

    <button class="run-btn" onclick="calculate()">üöÄ Run Projection</button>

    <div id="results" style="margin-top:30px; display:none;">
        <h3 style="color:#004a99;">Projection Table</h3>
        <table>
            <thead>
                <tr>
                    <th>Age</th>
                    <th>Salary</th>
                    <th>Net Conc. (15% Tax)</th>
                    <th>Non-Conc. (Spillover)</th>
                    <th>Earnings</th>
                    <th>Closing Balance</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
    </div>
</div>

<script>
    let sgMode = 'pct';
    let ssMode = 'pct';
    const CONC_CAP = 30000;
    const curr = (n) => new Intl.NumberFormat('en-AU', { style: 'currency', currency: 'AUD', maximumFractionDigits: 0 }).format(n);

    function setSGMode(mode) {
        sgMode = mode;
        document.getElementById('btnSGPct').classList.toggle('active', mode === 'pct');
        document.getElementById('btnSGDol').classList.toggle('active', mode === 'dol');
        updateBreakdown();
    }

    function setSSMode(mode) {
        ssMode = mode;
        document.getElementById('btnSSPct').classList.toggle('active', mode === 'pct');
        document.getElementById('btnSSDol').classList.toggle('active', mode === 'dol');
        updateBreakdown();
    }

    function updateBreakdown() {
        const freq = parseInt(document.getElementById('freq').value);
        const inputSal = parseFloat(document.getElementById('salary').value) || 0;
        const sgVal = parseFloat(document.getElementById('sgInput').value) || 0;
        const ssVal = parseFloat(document.getElementById('ssInput').value) || 0;
        
        const freqText = document.getElementById('freq').options[document.getElementById('freq').selectedIndex].text;
        let annualSal = inputSal * freq;

        // Calculate Annual Employer SG
        let annualSG = (sgMode === 'pct') ? (annualSal * (sgVal / 100)) : (sgVal * freq);
        document.getElementById('sgLabel').innerText = (sgMode === 'pct') ? "Employer SG Rate (%)" : `Employer SG Amount (${freqText} $)`;

        // Calculate Annual Salary Sacrifice
        let annualSS = (ssMode === 'pct') ? (annualSal * (ssVal / 100)) : (ssVal * freq);
        document.getElementById('ssLabel').innerText = (ssMode === 'pct') ? "Salary Sacrifice (%)" : `Salary Sacrifice (${freqText} $)`;

        const totalConcessionalProposed = annualSG + annualSS;
        const concessional = Math.min(totalConcessionalProposed, CONC_CAP);
        const nonConcessional = Math.max(0, totalConcessionalProposed - CONC_CAP);

        document.getElementById('dispConc').innerText = curr(concessional);
        document.getElementById('dispNonConc').innerText = curr(nonConcessional);
        document.getElementById('dispNonConc').style.color = nonConcessional > 0 ? "#e53e3e" : "#004a99";
        document.getElementById('capWarning').style.display = nonConcessional > 0 ? "block" : "none";
    }

    function calculate() {
        const age = parseInt(document.getElementById('age').value);
        const retAge = parseInt(document.getElementById('retAge').value);
        const freq = parseInt(document.getElementById('freq').value);
        const startSal = parseFloat(document.getElementById('salary').value) * freq;
        const wageGrowth = parseFloat(document.getElementById('wageGrowth').value) / 100;
        const sgVal = parseFloat(document.getElementById('sgInput').value);
        const ssVal = parseFloat(document.getElementById('ssInput').value);
        const annualReturn = parseFloat(document.getElementById('strategy').value);
        let currentBal = parseFloat(document.getElementById('balance').value);

        let annualSal = startSal;
        let rows = "";

        for (let i = 0; i <= (retAge - age); i++) {
            let annualSG = (sgMode === 'pct') ? (annualSal * (sgVal / 100)) : (sgVal * freq);
            let annualSS = (ssMode === 'pct') ? (annualSal * (ssVal / 100)) : (ssVal * freq);
            
            let totalProposed = annualSG + annualSS;
            let concessional = Math.min(totalProposed, CONC_CAP);
            let nonConcessional = Math.max(0, totalProposed - CONC_CAP);
            
            let netConcessional = concessional * 0.85; // Less 15% tax
            let fees = 52 + Math.min(currentBal * 0.0019, 1000);
            let earnings = (currentBal + ((netConcessional + nonConcessional) / 2)) * annualReturn;
            
            currentBal = currentBal + netConcessional + nonConcessional + earnings - fees;

            rows += `<tr>
                <td>${age + i}</td>
                <td>${curr(annualSal)}</td>
                <td>${curr(netConcessional)}</td>
                <td class="${nonConcessional > 0 ? 'text-red' : ''}">${curr(nonConcessional)}</td>
                <td>${curr(earnings)}</td>
                <td class="bg-blue">${curr(currentBal)}</td>
            </tr>`;

            annualSal *= (1 + wageGrowth);
        }

        document.getElementById('tableBody').innerHTML = rows;
        document.getElementById('results').style.display = 'block';
    }

    // Init display
    updateBreakdown();
</script>
</body>
</html>